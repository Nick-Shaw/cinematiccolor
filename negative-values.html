<!DOCTYPE HTML>
<html lang="EN">
 <head>
  <title>
   Negative Values
  </title>
  <meta content="Negative Values" name="description"/>
  <meta content="cinematic-color" name="keywords"/>
  <meta content="document" name="resource-type"/>
  <meta content="global" name="distribution"/>
  <meta content="text/html; charset=utf8" http-equiv="Content-Type"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="LaTeX2HTML v2019" name="Generator"/>
  <link href="working-with-log-imagery.html" rel="next"/>
  <link href="scene-referred-linear-compositing-challenges.html" rel="previous"/>
  <link href="working-with-log-imagery.html" rel="next"/>
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
  <link href="assets/css/custom.css" rel="stylesheet" type="text/css"/>
 </head>
 <body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
   <a class="navbar-brand" href="#">
    Cinematic Color 2
   </a>
   <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbarSupportedContent" data-toggle="collapse" type="button">
    <span class="navbar-toggler-icon">
    </span>
   </button>
   <div class="collapse navbar-collapse" id="navbar">
    <ul class="navbar-nav mr-auto">
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="foreword.html" id="foreword" role="button">
       Foreword
      </a>
      <div aria-labelledby="foreword" class="dropdown-menu">
       <a class="dropdown-item" href="description.html">
        Description
       </a>
       <a class="dropdown-item" href="authorship.html">
        Authorship
       </a>
       <a class="dropdown-item" href="on-web.html">
        On the Web
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="introduction.html" id="introduction" role="button">
       Introduction
      </a>
      <div aria-labelledby="introduction" class="dropdown-menu">
       <a class="dropdown-item" href="intended-audience.html">
        Intended Audience
       </a>
       <a class="dropdown-item" href="how-read-this-document.html">
        How to Read this Document
       </a>
       <a class="dropdown-item" href="goal.html">
        The Goal
       </a>
       <a class="dropdown-item" href="converging-approaches.html">
        Converging Approaches
       </a>
       <a class="dropdown-item" href="general-model-color-processing.html">
        A General Model of Color Processing
       </a>
       <a class="dropdown-item" href="color-management-challenges.html">
        Color Management Challenges
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="color-science.html" id="color-science" role="button">
       Color Science
      </a>
      <div aria-labelledby="color-science" class="dropdown-menu">
       <a class="dropdown-item" href="about-color-science.html">
        About Color Science
       </a>
       <a class="dropdown-item" href="electromagnetic-spectrum.html">
        Electromagnetic Spectrum
       </a>
       <a class="dropdown-item" href="human-visual-system.html">
        Human Visual System
       </a>
       <a class="dropdown-item" href="basic-colorimetry.html">
        Basic Colorimetry
       </a>
       <a class="dropdown-item" href="advanced-colorimetry.html">
        Advanced Colorimetry
       </a>
       <a class="dropdown-item" href="representing-color.html">
        Representing Color
       </a>
       <a class="dropdown-item" href="color-imaging-systems.html">
        Color Imaging Systems
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="workflow.html" id="workflow" role="button">
       Workflow
      </a>
      <div aria-labelledby="workflow" class="dropdown-menu">
       <a class="dropdown-item" href="about-workflow.html">
        About Workflow
       </a>
       <a class="dropdown-item" href="academy-color-encoding-system-aces.html">
        Academy Color Encoding System (ACES)
       </a>
       <a class="dropdown-item" href="look.html">
        The Look
       </a>
       <a class="dropdown-item" href="on-set.html">
        On Set
       </a>
       <a class="dropdown-item" href="visual-effects-animation-games.html">
        Visual Effects, Animation and Games
       </a>
       <a class="dropdown-item" href="compositing.html">
        Compositing
       </a>
       <a class="dropdown-item" href="di-grading.html">
        DI Grading
       </a>
       <a class="dropdown-item" href="critical-monitoring.html">
        Critical Monitoring
       </a>
       <a class="dropdown-item" href="finishing.html">
        Finishing
       </a>
       <a class="dropdown-item" href="archives.html">
        Archives
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="appendix.html" id="appendix" role="button">
       Appendix
      </a>
      <div aria-labelledby="appendix" class="dropdown-menu">
       <a class="dropdown-item" href="common-rgb-color-encodings.html">
        Common RGB Color Encodings
       </a>
       <a class="dropdown-item" href="opencolorio-ocio.html">
        OpenColorIO (OCIO)
       </a>
       <a class="dropdown-item" href="colour-science-python.html">
        Colour Science for Python
       </a>
       <a class="dropdown-item" href="luts-transforms.html">
        LUTs and Transforms
       </a>
       <a class="dropdown-item" href="asc-cdl.html">
        ASC CDL
       </a>
       <a class="dropdown-item" href="aces-ctl.html">
        ACES CTL
       </a>
       <a class="dropdown-item" href="full-legal-ranges.html">
        Full and Legal ranges
       </a>
       <a class="dropdown-item" href="chroma-decoupling.html">
        Chroma Decoupling
       </a>
       <a class="dropdown-item" href="camera-characterization.html">
        Camera Characterization
       </a>
       <a class="dropdown-item" href="file-formats.html">
        File Formats
       </a>
       <a class="dropdown-item" href="software.html">
        Software
       </a>
       <a class="dropdown-item" href="acknowledgements.html">
        Acknowledgements
       </a>
      </div>
     </li>
     <li class="nav-item dropdown" class_="nav-item">
      <a class="nav-link" href="glossary.html">
       Glossary
      </a>
     </li>
     <li class="nav-item dropdown" class_="nav-item">
      <a class="nav-link" href="bibliography.html">
       Bibliography
      </a>
     </li>
    </ul>
    <form class="form-inline my-2 my-md-0">
     <input class="form-control" placeholder="Search" type="text"/>
    </form>
   </div>
  </nav>
  <!-- Content -->
  <div class="container-fluid">
   <div class="row">
    <div class="col-md-12 px-3 py-3">
     <h2>
      <a id="SECTION00563000000000000000">
       Negative Values
      </a>
     </h2>
     <p>
      A frame from &lsquo;The Avengers: Infinity War&rdquo;. The frame in the original Alexa LogC encoding (top), The frame transformed to ACEScc with negative values in shown as purple fringing visible in particular on the top right light (middle) and the final frame (bottom)
&copy; 2018 MARVEL
     </p>
     <p>
      CIE 1931 2&deg; Standard Observer chromaticity plot of the image above
The above image contains pixel values which are positive in ALEXA Wide Gamut but negative in ACEScg as they are outside of the ACEScg gamut. This results in overly strong purple fringing and clamped values when viewed through an ACES Output Transform. The frame above the light shows the issue clearly. Even pixel values which are on or near the inside of the gamut boundary can result in artifacts. There are a number of potential approaches to solving this problem. Working in the original camera encoding gamut, ALEXA Wide Gamut in this case, is one option. Creating a technical grade for the shot which removes the artifact, and providing that as a LUT for use in VFX is another. With that option, it will be obvious if anything in compositing makes the artifact reappear.
     </p>
     <p>
      Negative values may occur in a scene-referred linear color if the working gamut is smaller than, or even just different from, the encoding gamut of the plate. In some extreme examples, cameras have been found to produce values outside of their specified encoding gamut. That could lead to negative scene-referred linear values even without transforming away from the camera&rsquo;s encoding gamut. Like NaNs and Inf values, this comes with the territory. Don&rsquo;t just clip these values! These negative values can pass through some operations without causing issues and should normally be preserved when delivering VFX renders to DI. However, the results of some mathematical operations used in compositing are undefined for negative numbers and may create NaNs or Infs, or push a small negative value to a much larger one. Sometimes, where negative values will be clamped by the final display transform, it may be safe to clamp them in the comp. This is a risky strategy though. Changes to the grade may make the clamping visible, causing artifacts such as black holes in the image. It is generally preferable to use an approach such as offsetting the values before an operation to make everything positive and then subtracting the offset afterward. Remember that compositing should be a no-op for unaffected pixels, so even if a pixel value represents an unreal color in the plate, the VFX shot should be returned to DI with values representing that same unreal color, matching the original plate.
     </p>
     <p>
      This is also something to watch out for in games. As mentioned in Section 3.4.3 Games, games may render in less precise &ldquo;small&rdquo; floating-point formats when an alpha channel is not needed and performance and memory bandwidth are more important than precision. It is important to remember that these floating point formats do not have a sign bit so do not support negative numbers, and thus cannot store out-of-gamut colors. If asked to do so, clipping will silently occur. Care must be taken to either choose the appropriate floating-point format, handle negative values explicitly or bring out-of-gamut values into the working gamut to avoid the silent artefacts that would otherwise occur.
     </p>
     <p>
     </p>
     <div class="navigation">
      <br/>
      <b>
       Next:
      </b>
      <a href="working-with-log-imagery.html">
       Working with Log Imagery
      </a>
      <b>
       Up:
      </b>
      <a href="compositing.html">
       Compositing
      </a>
      <b>
       Previous:
      </b>
      <a href="scene-referred-linear-compositing-challenges.html">
       Scene-Referred Linear Compositing Challenges
      </a>
      &nbsp;
      <b>
       <a href="contents.html" id="tex2html767">
        Contents
       </a>
      </b>
     </div>
    </div>
   </div>
  </div>
  <!-- Footer -->
  <footer class="page-footer font-small">
   <div class="footer-copyright text-center py-3">
    Copyright &copy; 2019 &ndash; Cinematic Color Authors &ndash;
    <a href="mailto:ves-tech-color@googlegroups.com">
     ves-tech-color@googlegroups.com
    </a>
   </div>
  </footer>
  <script src="assets/js/jquery.min.js">
  </script>
  <script src="assets/js/popper.min.js">
  </script>
  <script src="assets/js/bootstrap.min.js">
  </script>
 </body>
</html>
