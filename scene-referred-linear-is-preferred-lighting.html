<!DOCTYPE HTML>
<html lang="EN">
 <head>
  <title>
   Scene-Referred Linear is Preferred for Lighting
  </title>
  <meta content="Scene-Referred Linear is Preferred for Lighting" name="description"/>
  <meta content="cinematic-color" name="keywords"/>
  <meta content="document" name="resource-type"/>
  <meta content="global" name="distribution"/>
  <meta content="text/html; charset=utf8" http-equiv="Content-Type"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="LaTeX2HTML v2019" name="Generator"/>
  <link href="rendering-gamut-impact.html" rel="next"/>
  <link href="lighting-shading-rendering.html" rel="previous"/>
  <link href="rendering-gamut-impact.html" rel="next"/>
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
  <link href="assets/css/custom.css" rel="stylesheet" type="text/css"/>
 </head>
 <body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
   <a class="navbar-brand" href="#">
    Cinematic Color 2
   </a>
   <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbarSupportedContent" data-toggle="collapse" type="button">
    <span class="navbar-toggler-icon">
    </span>
   </button>
   <div class="collapse navbar-collapse" id="navbar">
    <ul class="navbar-nav mr-auto">
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="foreword.html" id="foreword" role="button">
       Foreword
      </a>
      <div aria-labelledby="foreword" class="dropdown-menu">
       <a class="dropdown-item" href="description.html">
        Description
       </a>
       <a class="dropdown-item" href="authorship.html">
        Authorship
       </a>
       <a class="dropdown-item" href="on-web.html">
        On the Web
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="introduction.html" id="introduction" role="button">
       Introduction
      </a>
      <div aria-labelledby="introduction" class="dropdown-menu">
       <a class="dropdown-item" href="intended-audience.html">
        Intended Audience
       </a>
       <a class="dropdown-item" href="how-read-this-document.html">
        How to Read this Document
       </a>
       <a class="dropdown-item" href="goal.html">
        The Goal
       </a>
       <a class="dropdown-item" href="converging-approaches.html">
        Converging Approaches
       </a>
       <a class="dropdown-item" href="general-model-color-processing.html">
        A General Model of Color Processing
       </a>
       <a class="dropdown-item" href="color-management-challenges.html">
        Color Management Challenges
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="color-science.html" id="color-science" role="button">
       Color Science
      </a>
      <div aria-labelledby="color-science" class="dropdown-menu">
       <a class="dropdown-item" href="electromagnetic-spectrum.html">
        Electromagnetic Spectrum
       </a>
       <a class="dropdown-item" href="human-visual-system.html">
        Human Visual System
       </a>
       <a class="dropdown-item" href="basic-colorimetry.html">
        Basic Colorimetry
       </a>
       <a class="dropdown-item" href="advanced-colorimetry.html">
        Advanced Colorimetry
       </a>
       <a class="dropdown-item" href="representing-color.html">
        Representing Color
       </a>
       <a class="dropdown-item" href="color-imaging-systems.html">
        Color Imaging Systems
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="workflow.html" id="workflow" role="button">
       Workflow
      </a>
      <div aria-labelledby="workflow" class="dropdown-menu">
       <a class="dropdown-item" href="academy-color-encoding-system-aces.html">
        Academy Color Encoding System (ACES)
       </a>
       <a class="dropdown-item" href="look.html">
        The Look
       </a>
       <a class="dropdown-item" href="on-set.html">
        On Set
       </a>
       <a class="dropdown-item" href="visual-effects-animation-games.html">
        Visual Effects, Animation and Games
       </a>
       <a class="dropdown-item" href="compositing.html">
        Compositing
       </a>
       <a class="dropdown-item" href="di-grading.html">
        DI Grading
       </a>
       <a class="dropdown-item" href="critical-monitoring.html">
        Critical Monitoring
       </a>
       <a class="dropdown-item" href="finishing.html">
        Finishing
       </a>
       <a class="dropdown-item" href="archives.html">
        Archives
       </a>
      </div>
     </li>
     <li class="nav-item dropdown">
      <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="appendix.html" id="appendix" role="button">
       Appendix
      </a>
      <div aria-labelledby="appendix" class="dropdown-menu">
       <a class="dropdown-item" href="common-rgb-color-encodings.html">
        Common RGB Color Encodings
       </a>
       <a class="dropdown-item" href="opencolorio-ocio.html">
        OpenColorIO (OCIO)
       </a>
       <a class="dropdown-item" href="colour-science-python.html">
        Colour Science for Python
       </a>
       <a class="dropdown-item" href="luts-transforms.html">
        LUTs and Transforms
       </a>
       <a class="dropdown-item" href="asc-cdl.html">
        ASC CDL
       </a>
       <a class="dropdown-item" href="aces-ctl.html">
        ACES CTL
       </a>
       <a class="dropdown-item" href="full-legal-ranges.html">
        Full and Legal ranges
       </a>
       <a class="dropdown-item" href="chroma-decoupling.html">
        Chroma Decoupling
       </a>
       <a class="dropdown-item" href="camera-characterization.html">
        Camera Characterization
       </a>
       <a class="dropdown-item" href="file-formats.html">
        File Formats
       </a>
       <a class="dropdown-item" href="software.html">
        Software
       </a>
       <a class="dropdown-item" href="acknowledgements.html">
        Acknowledgements
       </a>
      </div>
     </li>
     <li class="nav-item dropdown" class_="nav-item">
      <a class="nav-link" href="glossary.html">
       Glossary
      </a>
     </li>
     <li class="nav-item dropdown" class_="nav-item">
      <a class="nav-link" href="bibliography.html">
       Bibliography
      </a>
     </li>
    </ul>
    <form class="form-inline my-2 my-md-0">
     <input class="form-control" placeholder="Search" type="text"/>
    </form>
   </div>
  </nav>
  <!-- Content -->
  <div class="container-fluid">
   <div class="row">
    <div class="col-md-12 px-3 py-3">
     <h3>
      <a id="SECTION00546100000000000000">
       Scene-Referred Linear is Preferred for Lighting
      </a>
     </h3>
     <p>
      A render is a simulation of a real scene. In the real world, there is a linear relationship between the incoming and outgoing energy from a surface, i.e. the incoming light that is scattered or absorbed. To simulate that interaction properly, working with units that refer to the physical units of energy in the world and applying operations that maintain the linearity of these relationships makes the simulation more straightforward.
     </p>
     <p>
      First, the render itself benefits. Physically plausible light transport renderer mechanisms such as global illumination yield natural results when given scenes with linear high-dynamic range data. Physically-based specular models combined with area lights produce physically plausible results with high-dynamic range data. Rendering in scene-referred linear also allows lights and material components to be re-balanced post-render, with results that track identically as if the original render had been tweaked. Storing rendered images in a floating-point container is most common to preserve maximum image fidelity; the EXR format is most widely used in VFX and animation and increasingly in games and for interchange in post-production. See 4.9.2 EXR for a more in-depth description of OpenEXR.
     </p>
     <p>
      Figure 1 from &lsquo;OpenEXR Color Management&rsquo; by Kainz (2004), ILM advocating for the use of scene-referred linear values in lighting, rendering and compositing. Many of the devices and acronyms have changed, but the core concepts remain valid.
     </p>
     <p>
      As with preserving the dynamic range of the camera into DI Grading, rendering CGI in a high-dynamic range scene-referred linear space makes it simpler to produce HDR and SDR versions of the film. Rather than baking in tone and gamut mapping applicable only to one display format, different output transforms can be applied to the same scene-referred image data to view it on HDR or SDR displays.
One issue to watch out for with high-dynamic range renders is render noise. When scene textures like skydomes contain very bright areas, like the sun or other compact light sources, i.e. areas that substantially contribute to the scene illumination with relative luminance values well above 1.0, care must be taken in sampling to avoid noise. Rendering techniques such as multi-importance sampling (MIS) are useful to mitigate such issues. Even still, it is common to paint out very compact or very bright light sources, such as the sun, from skydomes, and then to add them back into the scene as native renderer lights to allow for both lower-noise sampling and often greater artistic control.
     </p>
     <p>
      Light shaders also benefit from working with scene-referred linear, specifically in the area of light falloff. In the distant past, the default mode of working with lights in computer-graphics was to not use falloff. However, when combined with physically-based shading models, using an inverse-square law light falloff behaves naturally as the relative size of a light diminishes with the square of the distance as a light recedes from a surface, or vice versa. Note that this is a simplification of the full solid angle-based equation for the projected area of a surface or light and that this can be problematic in particular when scenes are modeled with large units, say 1 unit is 1 meter, and it becomes common for objects to be less than one unit from lights. In this case, the distance value less than 1 drives the results of the inverse-square law falloff term to be considerably greater than 1, no longer resembling a falloff. If one tries to shoehorn realistic lighting falloff models into output-referred rendering, the non-linearity of output-referred spaces make it&rsquo;s very difficult to avoid clipping and generally implausible results. On the downside, one consequence of working with natural light falloff is that it&rsquo;s often required to have very high light intensity values. It is therefore common to express light intensity in user interfaces in terms of &ldquo;exposure&rdquo; or &ldquo;stops,&rdquo; as it&rsquo;s much friendlier to the artist to present an interface value of &rdquo;+20 stops,&rdquo; compared to an RGB value of &ldquo;1048576.0&rdquo;.
     </p>
     <p>
      Anti-aliasing operations also benefit from using scene-referred linear values, though one must be more careful with renderer reconstruction filters. Negatively lobed filters such as Catmull-Rom have an increased tendency to exhibit ringing artifacts due to the extra dynamic range. This is a particular problem on elements lit with very bright &ldquo;rim lights,&rdquo; as this creates bright specular highlights directly in contact with edges. The core challenge here is the same as when handling very bright, very small sections of imagery in compositing. There are a number of common approaches to working around such filtering issues. First, for operations that shows ringing artifacts, switching the filter to a box or gaussian filter will remove the artifact, at the expense of softening the image slightly. If the issue only happens in a few places, this may be a reasonable approach. Second, very bright specular samples can be rolled-off such that these samples do not contribute such large amounts of energy. However, this throws out much of the visually significant appearance which adds so much to the realism. Another approach is that the extra energy can be spread amongst neighboring pixels such that the specular hits show an effect analogous to camera flare. Both of these effects can be implemented in compositing.
     </p>
     <p>
     </p>
     <div class="navigation">
      <br/>
      <b>
       Next:
      </b>
      <a href="rendering-gamut-impact.html">
       The Rendering Gamut Impact
      </a>
      <b>
       Up:
      </b>
      <a href="lighting-shading-rendering.html">
       Lighting, Shading, and Rendering
      </a>
      <b>
       Previous:
      </b>
      <a href="lighting-shading-rendering.html">
       Lighting, Shading, and Rendering
      </a>
      &nbsp;
      <b>
       <a href="contents.html" id="tex2html740">
        Contents
       </a>
      </b>
     </div>
    </div>
   </div>
  </div>
  <!-- Footer -->
  <footer class="page-footer font-small">
   <div class="footer-copyright text-center py-3">
    Copyright &copy; 2019 &ndash; Cinematic Color Authors &ndash;
    <a href="mailto:ves-tech-color@googlegroups.com">
     ves-tech-color@googlegroups.com
    </a>
   </div>
  </footer>
  <script src="assets/js/jquery.min.js">
  </script>
  <script src="assets/js/popper.min.js">
  </script>
  <script src="assets/js/bootstrap.min.js">
  </script>
 </body>
</html>
